syntax = "proto3";

import "types.proto";

message Analysis {
    repeated Component graph = 1;
    PrivacyDefinition definition = 2;
}

message Component {
    oneof value {
        Transformation transformation = 1;
        Laplace laplace = 2;
        Literal literal = 3;
        Constant constant = 4;
        Mean mean = 5;
        DataSource datasource = 6;
    }
}

message Transformation {
    uint32 ID = 1;
    string name = 2;
    map<string, Component> arguments = 3;
}

message Mean {
    uint32 ID = 1;
    string columnID = 2;
    Component data = 3;
}

message Laplace {
    uint32 ID = 1;
    Component input = 2;
}

message DataSource {
    uint32 ID = 1;
    string datasetID = 2;
    string columnID = 3;
}

message Literal {
    uint32 ID = 1;
    NDArray ndarray = 2;
}

message Constant {
    uint32 ID = 1;
}
