syntax = "proto3";

import "types.proto";

message Analysis {
    map<uint32, Component> graph = 1;
    PrivacyDefinition definition = 2;
}

message Component {
    oneof value {
        Transformation transformation = 1;
        Laplace laplace = 2;
        Literal literal = 3;
        Constant constant = 4;
        Mean mean = 5;
        DataSource datasource = 6;
    }
}

message Transformation {
    map<string, uint32> arguments = 1;
    string name = 2;
}

message Mean {
    uint32 argument = 1;
    string columnID = 2;
}

message Laplace {
    map<string, uint32> arguments = 1;
    string columnID = 2;
    Component input = 3;
}

message DataSource {
    string datasetID = 2;
    string columnID = 3;
}

message Literal {
    NDArray ndarray = 2;
}

message Constant {
    string name = 1;
}
