syntax = "proto3";

import "types.proto";

message Analysis {
    map<uint32, Component> graph = 1;
    PrivacyDefinition definition = 2;
}

message Component {
    message Field {
        uint32 source_node_id = 1;
        string source_field = 2;
    }

    map<string, Field> arguments = 1;

    oneof value {
        Add add = 2;
        Laplace laplace = 3;
        Literal literal = 4;
        Constant constant = 5;
        Mean mean = 6;
        DataSource datasource = 7;
    }

}

message Add {
}

message Mean {
}

message Laplace {
}

message DataSource {
    string dataset_id = 1;
    string column_id = 2;
}

message Literal {
    NDArray ndarray = 1;
}

message Constant {
}
